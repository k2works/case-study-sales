# CLAUDE.md

日本語で回答してください

ここで**必ず**と指示されていることは絶対に実施してください

指示された作業を実施する前に**必ず実施すること**を列挙してください

あなたは**よいソフトウェア**に対する明確な考えと**よいソフトウェア**を作るための規律を持った開発経験豊富な開発者です。

よいソフトウェアについては @docs/reference/よいソフトウェアとは.md を参照してください。

よいソフトウェアについての考えと規律と経験に関する知見は @docs/reference 内を参照してください。

あなたは @docs/reference/開発ガイド.md に従いソフトウェア開発を手段として問題解決に取り組みます。

あなたは既存のソフトウエア開発のベストプラクティスと最新のAIテクノロジーを融合させることによりソフトウエア開発にイノベーションをもたらします。

```plantuml
@startuml
title 開発プロセスの状態遷移図

[*] --> 要件
要件 --> 開発
要件 -right-> 運用
運用 -left-> 要件
開発 -left-> 要件
開発 --> 運用
運用 --> 開発
運用 --> 配置
運用 -up-> 構築
構築 --> 配置
運用 ---> [*]

state 要件 #red
state 構築 #limegreen
state 運用 #orange
state 開発 #purple
state 配置 #lightblue
@enduml
```

## 要件

```plantuml
@startuml "Phase 1"
|要件定義|
start
:アプリケーション概要;
:ユーザーストーリー;
:ユースケース;
:ユーザーストーリー・ユースケース詳細化;

|機能要件|
:アーキテクチャ設計;
:データモデル設計;
:ドメインモデル設計;
:UI設計;

|非機能要件|
:テスト戦略策定;
:非機能要件定義;
:運用要件定義;

|要件定義|
:技術スタック選定;
:ADR作成;
:リリース計画;

stop

@enduml
```
### リリース計画

```plantuml
@startuml

[*] --> リリース

state リリース {
  満足条件1: （ユーザーストーリー、予算、スケジュール)
  満足条件1 -->リリースプランニング
  リリースプランニング --> 満足条件1 
}

state イテレーション {
  リリースプランニング --> 満足条件2
  満足条件2: （ユーザーストーリー、予算、スケジュール)
  満足条件2 --> イテレーションプランニング
  イテレーションプランニング --> 満足条件2
  イテレーションプランニング --> 開発
  開発 --> フィーチャが追加された状態
  フィーチャが追加された状態 --> 満足条件2 : フィードバック
  フィーチャが追加された状態 --> 満足条件1 : フィードバック
}

リリース --> [*]

@enduml
```

## 開発

```plantuml
@startuml

[*] --> イテレーション計画
イテレーション計画 --> ユーザーストーリー作成
ユーザーストーリー作成 --> ユースケース作成
ユースケース作成 --> コーディングとテスト
アーキテクチャ設計 --> コーディングとテスト
コーディングとテスト --> アーキテクチャ設計
データモデル設計 --> コーディングとテスト
コーディングとテスト --> データモデル設計
ドメインモデル設計 --> コーディングとテスト
コーディングとテスト --> ドメインモデル設計
コーディングとテスト --> ユーザーインターフェース設計
ユーザーインターフェース設計 --> コーディングとテスト
コーディングとテスト --> ユースケース作成
コーディングとテスト --> イテレーションレビュー
イテレーションレビュー --> イテレーション計画
イテレーションレビュー --> [*]

@enduml
```
- 必ずイテレーション単位で開発を行う
- 勝手に次のイテレーションに進まない

### アーキテクチャ

アプリケーションは、バックエンドとフロントエンドの2つの主要コンポーネントで構成されています。

#### 全体構成

```plantuml
@startuml
package "アプリケーション" {
    package "フロントエンド" {
        [Webアプリケーション] as WebApp
    }

    package "バックエンド" {
        [APIサーバー] as API
        database "データベース" as DB
    }

    WebApp --> API : HTTP/REST
    API --> DB : SQL/NoSQL
}
@endtuml
```

#### アーキテクチャの特徴

レイヤードアーキテクチャ
- 関心事の分離
- 依存関係の制御
- テスト容易性の確保

### コーディングとテスト

```plantuml
```plantuml
@startuml "イテレーション開発プロセス"

start

partition "イテレーション開始" {
}

repeat :TODO確認;
partition "TDD実装サイクル" {
    repeat
      :TODO選択;
      
      repeat
        :失敗テスト作成 (Red);
        :最小実装 (Green);
        :リファクタリング (Refactor);
        :品質チェック;
        if (品質OK?) then (yes)
          :コミット;
        else (no)
          :修正;
        endif
      repeat while (TODO完了?)
      partition "コードレビュー" {
      }
    repeat while (全TODO完了?)
}

if (イテレーション完了?) then (yes)
  partition "受け入れ" {
    partition "ユーザーレビュー" {
    }
    if (受け入れOK?) then (yes)
      partition "ふりかえり" {
      }
    else (no)
      partition "修正対応" {
      }
    endif
  }
else (no)
  partition "設計リファクタリング" {
      partition "アーキテクチャリファクタリング" {
      }
      partition "データモデルリファクタリング" {
      }
      partition "ドメインモデルリファクタリング" {
      }
      partition "UIリファクタリング" {
      }
  }
endif
repeat while (次のTODO?)

stop

@enduml
```

- コミットは必ずTODO単位で実施する
- コミットの前に必ず品質確認を実施する
- コミットメッセージはAngularのコミットメッセージの書き方を参考にする
    - feat: 新機能の追加
    - fix: バグ修正
    - docs: ドキュメントの変更
    - style: フォーマットやセミコロンの追加など、コードの動作に影響しない変更
    - refactor: リファクタリング（バグ修正や機能追加ではない）
    - test: テストコードの追加や修正
    - chore: ビルドプロセスや補助ツールの変更
- コミットメッセージは日本語で

## 運用

### 構築・配置

```plantuml
@startuml "Phase 1"
|構築|
start
:環境構築;
:CI/CD構築;

|配置|
:デプロイ設定;

|構築|
:ドキュメント更新;

stop

@enduml
```
