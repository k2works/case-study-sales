:toc: left
:toclevels: 5
:sectnums:
:stem:
:source-highlighter: coderay

# 開発

## ユースケース

### 認証

[plantuml]
----
@startuml
left to right direction
actor "ユーザー" as member
actor "管理者" as admin
rectangle ユーザー認証 {
  usecase "管理者を認証する" as UC1
  usecase "ユーザーを認証する" as UC2
}
admin --> UC1
member --> UC2
@enduml
----

### ユーザー管理

[plantuml]
----
@startuml
left to right direction
actor "管理者" as admin
rectangle ユーザー管理 {
    usecase "ユーザー一覧を取得する" as UC1
    usecase "ユーザーを新規登録する" as UC2
    usecase "ユーザーを取得する" as UC3
    usecase "登録済みユーザーを更新登録する" as UC4
    usecase "登録済みユーザーを削除する" as UC5
}
admin --> UC1
admin --> UC2
admin --> UC3
admin --> UC4
admin --> UC5
@enduml
----

## 仕様

### 認証

[source,yml]
----
include::../api/src/test/resources/features/Auth.feature[]
----

### ユーザー管理

[source,yml]
----
include::../api/src/test/resources/features/User.feature[]
----

## アーキテクチャ

[plantuml]
----
@startuml
title: Apiアーキテクチャ

package "プレゼンテーション層" as UI {
	class Controller
}

package "サービス層" as APP{
	class Service
}

package "インフラストラクチャ層" as IF {
	class DataSource
}

package "ドメイン層" as DOMAIN{
    package "Model" as MODEL {
        class User
        class Auth
    }
}

database データベース as DB {

}

UI ---> APP
Service -> MODEL
APP ---> IF
DataSource --> DB

@endtuml
----

[source,java]
----
include::../api/src/test/java/com/example/sms/ArchitectureRuleTest.java[]
----

## データモデル

image::./images/library-er-summary.svg[]

image::./images/relationships.implied.compact.png[]

## ドメインモデル

image::./images/business-rule-relation.svg[]

## ユーザーインターフェース

### 画面

#### 認証

[plantuml]
----
@startsalt
{+
  ログイン画面
  {+
    {
      [  ログイン   ]
      ---------------------
      ユーザーID    | "MyName   "
      パスワード | "****     "
    }
  }
----------------
  ホーム画面
  {+
  {
  ホーム
  ログアウト
  } |
  {
    {
      <b>お知らせ
    }
    ---------------------
    {
        2020/01/01 お知らせ内容
        2020/01/02 お知らせ内容
        2020/01/03 お知らせ内容
    }
  }
  }
}
@endsalt
----

### モデル

#### 認証

[plantuml]
----
@startuml
  class ログイン {
    ユーザーID
    パスワード
    ログイン()
  }

  class ホーム {
    お知らせ
  }

  class ナビゲーション {
    ホーム()
    ログアウト()
  }

  ナビゲーション -* ホーム
----

### インタラクション

#### 認証

[plantuml]
----
@startuml
  ログイン_シングル --> ホーム_シングル
  ホーム_シングル --> ログイン_シングル
@enduml
----
