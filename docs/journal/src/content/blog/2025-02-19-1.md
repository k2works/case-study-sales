---
title: 'バックエンド実装手順'
description: 'バックエンドの実装手順について'
pubDate: '2025-02-19'
heroImage: '/blog-placeholder-5.jpg'
---

```mermaid
mindmap
  root(バックエンド実装手順)
    アーキテクチャスタイル
        レイヤードアーキテクチャ
            プレゼンテーション層
              コントローラ
            サービス層
              アプリケーションサービス
            インフラストラクチャ層
              データアクセス
              データベース
            ドメイン層
              ドメインモデル
        ヘキサゴナルアーキテクチャ
        CQRS/ES
    アーキテクチャパターン
       トランザクションスクリプト
       アクティブレコードパターン
       貧血ドメインモデルパターン
       ドメインモデルパターン
    開発プロセス
        XP
            リリース計画
            イテレーション計画
            コーディングとテスト
            イテレーションレビュー
```

## アーキテクチャスタイル

```mermaid
classDiagram
  class データベース

  class プレゼンテーション層 {
    Controller
  }

  class サービス層 {
    Service
  }

  class インフラストラクチャ層 {
    DataSource
  }

  class ドメイン層 {
    Model 
  }

    プレゼンテーション層 --> サービス層
    サービス層 <-- インフラストラクチャ層
    サービス層 --> ドメイン層
    インフラストラクチャ層 --> データベース
```

### データベース

- データベースマイグレーションでデータベーススキーマを定義する。
- サンプルデータをデータベースに投入する。

### インフラストラクチャ層

- MyBatisGeneratorを使用して、データアクセスオブジェクトを生成する。
- テストコンテナを使った単体テストを実装する。

### サービス層

- アプリケーションサービスを実装する。
- アプリケーションサービスの単体テストを実装する。

### プレゼンテーション層

- コントローラを実装する。
- 受入テストを実装する。

### ドメイン層

- ドメインモデルを実装する。
- ドメインモデルの単体テストを実装する。

## 開発プロセス

```mermaid
stateDiagram-v2
    [*] --> リリース計画
    リリース計画 --> イテレーション計画
    イテレーション計画 --> コーディングとテスト
    
    コーディングとテスト --> イテレーションレビュー

    イテレーションレビュー --> イテレーション計画
    イテレーションレビュー --> [*]
```

### コーディングとテスト

```mermaid
flowchart TD
    A{ユーザーストーリー} --> B{CRUD実装済み?}
    B -- いいえ --> B_1[貧血ドメインモデル]
    B_1 --> C_1[インサイドサイドアウト]
    B -- はい --> B_2[ドメインモデル]
    B_2 --> C_2[アウトサイドイン]
```

#### インサイドアウト

```mermaid
flowchart TD
    A[Start] --> B[データベース]
    B --> C[インフラストラクチャ層]
    B --> D[ドメイン層]
    C --> E[サービス層]
    D --> E[サービス層]
    E --> F[プレゼントテーション層]
    F --> I[end]
```

```mermaid
stateDiagram-v2
    コーディングとテスト --> TODO: TDOリストを作成
    TODO --> Red: 最小限の実装
    Red --> Green: テストを書く
    Green --> Refactor: リファクタリング
    Refactor --> Red: 次の実装
    Red: 動作の確認
    Green: テストが成功
    Refactor: コードの重複を除去してリファクタリング
    Refactor --> TODO: リファクタリングが完了したらTODOリストに戻る
    TODO --> コーディングとテスト: TODOリストが空になるまで繰り返す
    コーディングとテスト --> イテレーションレビュー
```

#### アウトサイドイン

```mermaid
flowchart TD
    A[Start] --> B[プレゼントテーション層]
    B --> C[サービス層]
    C --> D[ドメイン層]
    D--> E[インフラストラクチャ層]
    D--> F[データベース]
    E --> I[end]
    F --> I
```

```mermaid
stateDiagram-v2
    コーディングとテスト --> TODO: TDOリストを作成
    TODO --> Red: テストを書く
    Red --> Green: 最小限の実装
    Green --> Refactor: リファクタリング
    Refactor --> Red: 次のテストを書く
    Red: テストに失敗
    Green: テストに通る最小限の実装
    Refactor: コードの重複を除去してリファクタリング
    Refactor --> TODO: リファクタリングが完了したらTODOリストに戻る
    TODO --> コーディングとテスト: TODOリストが空になるまで繰り返す
    コーディングとテスト --> イテレーションレビュー
```
