---
title: 'ドメイン駆動設計をはじめよう'
description: 'ドメイン駆動設計の基本的な考え方について'
pubDate: '2025-02-20'
heroImage: '/blog-placeholder-3.jpg'
---

```mermaid
mindmap
  root(ドメイン駆動設計をはじめよう)
    課題
      事業領域 ドメイン
      業務領域 サブドメイン
    解決方針
      業務ロジック アーキテクチャパターン
        トランザクションスクリプト
        アクティブレコード
        ドメインモデル
        イベント履歴式ドメインモデル イベントソーシング
      技術方式 アーキテクチャスタイル
        レイヤードアーキテクチャ
        ポートとアダプター
        コマンド・クエリ責任分離 CQRS
    実現手段
      イベントストーミング
      マイクロサービス
      イベント駆動アーキテクチャ
```

## 課題

- 私たちが取り組んでいる事業活動は何か
- 事業目標は何か
- 事業目標を達成するための戦略は何か

| カテゴリ- | 競争優位性 | 複雑さ | 変化  | 実現手段            | 課題の特性     |
|-------|-------|-----|-----|-----------------|-----------|
| 中核    | 〇     | 大きい | 多い  | 社内で開発           | 複雑で興味深い   |
| 一般    | ×     | 大きい | 少ない | パッケージや外部サービスを利用 | 既存の解決策がある |
| 補完    | ×     | 小さい | 少ない | 内部または外部委託       | 単純        |

```mermaid
quadrantChart
    title 事業領域の分類
    x-axis "競合他社との差別化 小" --> "競合他社との差別化 大"
    y-axis "業務ロジックの複雑さ 小" --> "業務ロジックの複雑さ 大"
    quadrant-1 "中核"
    quadrant-2 "一般"
    quadrant-3 "一般または補完"
    quadrant-4 "補完"
    "業務領域": [0.3, 0.6]
    "業務領域": [0.45, 0.23]
    "業務領域": [0.57, 0.69]
    "業務領域": [0.78, 0.34]
    "業務領域": [0.40, 0.34]
    "業務領域": [0.35, 0.78]
```

## 解決方針

```mermaid
flowchart TD
    A{業務領域のカテゴリー} -- 補完、一般との連携 --> B{データ構造が複雑か?}
    B -- いいえ --> B_1[トランザクションスクリプト]
    B_1 --> C_1[逆ピラミッド形のテスト]
    B_1 --> B_1_2{永続化モデルは複数か?}
    B_1_2 -- いいえ --> B_1_2_1[レイヤードアーキテクチャ 3層]
    B_1_2 -- はい --> B_2_2
    B -- はい --> B_2[アクティブレコード]
    B_2 --> C_2[ダイヤモンド形のテスト]
    B_2 --> B_2_2{永続化モデルは複数か?}
    B_2_2 -- いいえ --> B_2_2_1[レイヤードアーキテクチャ 4層]

    A{業務領域のカテゴリー} -- 中核の業務領域 --> D{金額を扱う/分析/監査記録が必要か?}
    D -- いいえ --> D_1[ドメインモデル]
    D_1 --> E_1[ピラミッド形のテスト]
    D_1 --> D_1_2{永続化モデルは複数か?}
    D_1_2 -- いいえ --> D_1_2_1[ポートとアダプター]
    D_1_2 -- はい --> D_2
    D -- はい --> D_2[イベント履歴式ドメインモデル]
    D_2 --> E_1
    D_2 --> F_1[CQRS]
```

## 実現手段

- イベントストーミング
- マイクロサービス
- イベント駆動アーキテクチャ
